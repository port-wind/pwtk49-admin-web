<script setup lang="ts">
import { SSOLogin } from '@/api/super/index'

// const login = async (token) => {
//   try {
//     const
//     // æ›¿æ¢ä¸ºä½ çš„åŽç«¯ API æŽ¥å£
//     const response = await axios.post('//ssoLogin', { token })
//     if (response.data.success) {
//       // ç™»å½•æˆåŠŸåŽçš„æ“ä½œï¼Œä¾‹å¦‚ä¿å­˜ token åˆ° localStorage æˆ– Vuex
//       localStorage.setItem('authToken', token)
//       window.location.href = '/dashboard' // è·³è½¬åˆ°ç™»å½•åŽçš„é¡µé¢
//     } else {
//       throw new Error(response.data.message || 'Login failed')
//     }
//   } catch (err) {
//     error.value = err.message
//   } finally {
//     loading.value = false
//   }
// }

onMounted(async () => {
  // http://localhost:8001/#/superAdmin/ssoLogin?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxMSIsInVzZXJuYW1lIjoicHd0azIiLCJjaWQiOiI4NiIsImV4cCI6MTczMjYyNjIzOX0.b2D4BrZ96gK-EwCmJR56iChi_00bl4Yewj5wfaJNa7U&cid=86
  console.log('111123123SSO page add')

  const urlParams = new URLSearchParams(window.location.search)
  const token = urlParams.get('token')
  const cid = urlParams.get('cid')
  if (token) {
    const res = await SSOLogin({
      cid: cid!,
      ssoToken: token
    })
    console.log('ðŸš€ ~ onMounted ~ res:', res)
  }
})
</script>

<template>
  <div>
    <h1>SSO Login</h1>
  </div>
</template>

<style lang="less" scoped></style>
